(function(a){a.fn.parallax=function(b,c){return this.each(function(){var d=a.extend({},{parallaxClass:null,layerClass:null,offset:true,animation:{duration:50,easing:"linear",queue:false}},c);var e=a(this).addClass(d.parallaxClass).data({layers:[]});a.each(b,function(b,c){var f=a.extend({},{xFn:null,yFn:null},c);var g=e.find(b).addClass(d.layerClass);e.data("layers").push(g);e.on("update.parallax.layer",b,function(){var b=a(this);var c={};var e={scroll:{left:a(window).scrollLeft(),top:a(window).scrollTop()},dimension:{width:a(window).width(),height:a(window).height()}};if(f.xFn){c["backgroundPositionX"]=a.proxy(f.xFn,b)(e)}if(f.yFn){c["backgroundPositionY"]=a.proxy(f.yFn,b)(e)}b.stop(true,false).animate(c,d.animation)})});e.on("update.parallax",function(){a.each(a(this).data("layers"),function(a,b){b.trigger("update.parallax.layer")})})})}})(jQuery)