(function(a){a.fn.parallax=function(c,b){return this.each(function(){var d=a.extend({},{parallaxClass:null,layerClass:null,offset:true,animation:{duration:50,easing:"linear",queue:false}},b);var e=a(this).addClass(d.parallaxClass).data({layers:[]});a.each(c,function(g,i){var f=a.extend({},{xFn:null,yFn:null,},i);var h=e.find(g).addClass(d.layerClass);e.data("layers").push(h);e.on("update.parallax.layer",g,function(){var k=a(this);var l={};var j={scroll:{left:a(window).scrollLeft(),top:a(window).scrollTop()},dimension:{width:a(window).width(),height:a(window).height()}};if(f.xFn){l.backgroundPositionX=a.proxy(f.xFn,k)(j)}if(f.yFn){l.backgroundPositionY=a.proxy(f.yFn,k)(j)}k.stop(true,false).animate(l,d.animation)})});e.on("update.parallax",function(){a.each(a(this).data("layers"),function(g,f){f.trigger("update.parallax.layer")})})})}})(jQuery);